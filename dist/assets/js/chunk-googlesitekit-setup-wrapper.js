(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{146:function(e,t,n){"use strict";n.r(t);var i=n(9),a=n.n(i),l=n(2),o=n.n(l),c=n(3),s=n.n(c),r=n(4),u=n.n(r),d=n(5),m=n.n(d),g=n(6),h=n.n(g),p=(n(8),n(37)),f=n(11),v=n(36),_=n(0),k=wp.element,R=k.Component,y=k.Fragment,E=lodash.delay,w=wp.i18n.__,N=wp.hooks.applyFilters,b=wp.components.withFilters,C=function(e){function t(){return o()(this,t),u()(this,m()(t).apply(this,arguments))}return h()(t,e),s()(t,[{key:"render",value:function(){var e=this.props.children;return React.createElement(y,null,e)}}]),t}(R),D=function(e){function t(e){var n;o()(this,t),n=u()(this,m()(t).call(this,e));var i=googlesitekit.setup.moduleToSetup;return n.state={currentModule:i,refresh:!1},n.timeoutID=null,n.unfocusedTime=0,n.autoRefreshModules=N("googlesitekit.autoRefreshModules",[]),n.moduleRefresh=n.autoRefreshModules.find(function(e){return n.state.currentModule===e.identifier}),n.refreshStatus=n.refreshStatus.bind(a()(n)),n.startUnfocusedTimer=n.startUnfocusedTimer.bind(a()(n)),n}return h()(t,e),s()(t,[{key:"componentDidMount",value:function(){window.addEventListener("focus",this.refreshStatus),window.addEventListener("blur",this.startUnfocusedTimer)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("focus",this.refreshStatus),window.removeEventListener("blur",this.startUnfocusedTimer)}},{key:"startUnfocusedTimer",value:function(){var e=this;if(this.moduleRefresh){var t=!0;this.moduleRefresh.toRefresh&&(t=this.moduleRefresh.toRefresh()),t&&(this.timeoutID=window.setInterval(function(){e.unfocusedTime++},1e3))}}},{key:"refreshStatus",value:function(){if(this.moduleRefresh){var e=this.moduleRefresh.idleTime||15,t=!0;this.moduleRefresh.toRefresh&&(t=this.moduleRefresh.toRefresh()),t&&(e<this.unfocusedTime&&this.setState({refresh:this.timeoutID}),window.clearTimeout(this.timeoutID),this.unfocusedTime=0,this.timeoutID=null)}}},{key:"render",value:function(){var e=this.state.currentModule,n=t.loadSetupModule(e),i=Object(_.n)("googlesitekit-settings",{});return React.createElement(y,null,React.createElement(p.a,null),React.createElement("div",{className:"googlesitekit-setup"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("section",{className:"googlesitekit-setup__wrapper"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-12 "},React.createElement("p",{className:" googlesitekit-setup__intro-title googlesitekit-overline "},w("Connect Service","google-site-kit")),n))),React.createElement("div",{className:"googlesitekit-setup__footer"},React.createElement("div",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-2-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},React.createElement(f.a,{id:"setup-".concat(e,"-cancel"),href:i},w("Cancel","google-site-kit"))),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--span-2-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop mdc-layout-grid__cell--align-right "},React.createElement(v.a,null)))))))))))}}],[{key:"loadSetupModule",value:function(e){var n=b("googlesitekit.ModuleSetup-".concat(e))(C);return React.createElement(n,{finishSetup:t.finishSetup,onSettingsPage:!1,isEditing:!0})}},{key:"finishSetup",value:function(){var e={notification:"authentication_success"};googlesitekit.setup&&googlesitekit.setup.moduleToSetup&&(e.slug=googlesitekit.setup.moduleToSetup);var t=Object(_.n)("googlesitekit-dashboard",e);E(function(){window.location.replace(t)},500,"later")}}]),t}(R);t.default=D},36:function(e,t,n){"use strict";n(8);var i=n(11);t.a=function(){var e=(0,wp.i18n.__)("Need help?","google-site-kit");return React.createElement(i.a,{className:"googlesitekit-help-link",href:"https://sitekit.withgoogle.com/documentation/",external:!0},e)}},37:function(e,t,n){"use strict";var i=n(2),a=n.n(i),l=n(3),o=n.n(l),c=n(4),s=n.n(c),r=n(5),u=n.n(r),d=n(6),m=n.n(d),g=(n(8),wp.components.withFilters),h=function(e){function t(){return a()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"render",value:function(){return null}}]),t}(wp.element.Component),p=g("googlesitekit.ErrorNotification")(h),f=n(70),v=n(10),_=n.n(v),k=n(12),R=n.n(k),y=n(9),E=n.n(y),w=n(59),N=n(24),b=n(19),C=n(1),D=n.n(C),S=wp.element,M=S.Component,T=S.createRef,A=function(e){function t(e){var n;return a()(this,t),(n=s()(this,u()(t).call(this,e))).menuRef=T(),n}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){var e=this.props.menuOpen;this.menu=new b.f(this.menuRef.current),this.menu.open=e,this.menu.setDefaultFocusState(1)}},{key:"componentDidUpdate",value:function(e){var t=this.props.menuOpen;t!==e.menuOpen&&(this.menu.open=t)}},{key:"render",value:function(){var e=this.props,t=e.menuOpen,n=e.menuItems,i=e.onSelected,a=e.id;return React.createElement("div",{className:"mdc-menu mdc-menu-surface",ref:this.menuRef},React.createElement("ul",{id:a,className:"mdc-list",role:"menu","aria-hidden":!t,"aria-orientation":"vertical",tabIndex:"-1"},n.map(function(e,t){return React.createElement("li",{key:t,className:"mdc-list-item",role:"menuitem",onClick:i.bind(null,t),onKeyDown:i.bind(null,t)},React.createElement("span",{className:"mdc-list-item__text"},e))})))}}]),t}(M);A.propTypes={menuOpen:D.a.bool.isRequired,menuItems:D.a.array.isRequired,id:D.a.string.isRequired};var O=A,I=n(0),U=n(7),L=wp.element,x=L.Component,B=L.Fragment,F=L.createRef,q=wp.i18n.__,j=wp.url.addQueryArgs,K=function(e){function t(e){var n;return a()(this,t),(n=s()(this,u()(t).call(this,e))).state={dialogActive:!1,menuOpen:!1},n.handleMenu=n.handleMenu.bind(E()(n)),n.handleMenuClose=n.handleMenuClose.bind(E()(n)),n.handleMenuItemSelect=n.handleMenuItemSelect.bind(E()(n)),n.handleDialog=n.handleDialog.bind(E()(n)),n.handleDialogClose=n.handleDialogClose.bind(E()(n)),n.handleUnlinkConfirm=n.handleUnlinkConfirm.bind(E()(n)),n.menuButtonRef=F(),n.menuRef=F(),n}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMenuClose),window.addEventListener("keyup",this.handleMenuClose),window.addEventListener("keyup",this.handleDialogClose)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMenuClose),window.removeEventListener("keyup",this.handleMenuClose),window.removeEventListener("keyup",this.handleDialogClose)}},{key:"handleMenu",value:function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})}},{key:"handleMenuClose",value:function(e){("keyup"!==e.type||27!==e.keyCode)&&"mouseup"!==e.type||this.menuButtonRef.current.buttonRef.current.contains(e.target)||this.menuRef.current.menuRef.current.contains(e.target)||this.setState({menuOpen:!1})}},{key:"handleMenuItemSelect",value:function(e,t){if("keydown"===t.type&&(13===t.keyCode||32===t.keyCode)||"click"===t.type)switch(e){case 0:this.handleDialog();break;default:this.handleMenu()}}},{key:"handleDialog",value:function(){this.setState(function(e){return{dialogActive:!e.dialogActive,menuOpen:!1}})}},{key:"handleDialogClose",value:function(e){27===e.keyCode&&this.setState({dialogActive:!1,menuOpen:!1})}},{key:"handleUnlinkConfirm",value:function(){var e=R()(_.a.mark(function e(){var t;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.c.set(U.a,"user","disconnect");case 2:this.setState({dialogActive:!1}),Object(I.d)(),t=googlesitekit.admin.adminRoot,document.location=j(t.replace("admin.php",""),{notification:"googlesitekit_user_disconnected"});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=googlesitekit.admin.userData,t=e.email,n=void 0===t?"":t,i=e.picture,a=void 0===i?"":i,l=this.state,o=l.dialogActive,c=l.menuOpen;return React.createElement(B,null,React.createElement("div",{className:"googlesitekit-dropdown-menu mdc-menu-surface--anchor"},React.createElement(N.a,{ref:this.menuButtonRef,className:"googlesitekit-header__dropdown mdc-button--dropdown",text:!0,onClick:this.handleMenu,icon:a?React.createElement("i",{className:"mdc-button__icon","aria-hidden":"true"},React.createElement("img",{className:"mdc-button__icon--image",src:a,alt:q("User Avatar","google-site-kit")})):void 0,ariaHaspopup:"menu",ariaExpanded:c,ariaControls:"user-menu"},n),React.createElement(O,{ref:this.menuRef,menuOpen:c,menuItems:[q("Disconnect","google-site-kit")],onSelected:this.handleMenuItemSelect,id:"user-menu"})),React.createElement(w.a,{dialogActive:o,handleConfirm:this.handleUnlinkConfirm,handleDialog:this.handleDialog,title:q("Disconnect","google-site-kit"),subtitle:q("Disconnecting Site Kit by Google will remove your access to all services. After disconnecting, you will need to re-authorize to restore service.","google-site-kit"),confirmButton:q("Disconnect","google-site-kit"),provides:[]}))}}]),t}(x),G=wp.element,J=G.Component,P=G.Fragment,W=function(e){function t(){return a()(this,t),s()(this,u()(t).apply(this,arguments))}return m()(t,e),o()(t,[{key:"render",value:function(){var e=googlesitekit.setup.isAuthenticated;return React.createElement(P,null,React.createElement("header",{className:"googlesitekit-header"},React.createElement("section",{className:"mdc-layout-grid"},React.createElement("div",{className:"mdc-layout-grid__inner"},React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--span-3-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},React.createElement(f.a,null)),React.createElement("div",{className:" mdc-layout-grid__cell mdc-layout-grid__cell--align-middle mdc-layout-grid__cell--align-right-phone mdc-layout-grid__cell--span-1-phone mdc-layout-grid__cell--span-4-tablet mdc-layout-grid__cell--span-6-desktop "},e&&React.createElement(K,null))))),React.createElement(p,null))}}]),t}(J);t.a=W},59:function(e,t,n){"use strict";var i=n(2),a=n.n(i),l=n(3),o=n.n(l),c=n(4),s=n.n(c),r=n(5),u=n.n(r),d=n(6),m=n.n(d),g=(n(8),n(1)),h=n.n(g),p=n(24),f=n(11),v=n(19),_=n(134),k=n.n(_),R=wp.element,y=R.Component,E=R.createRef,w=wp.i18n.__,N=function(e){function t(){var e;return a()(this,t),(e=s()(this,u()(t).call(this))).state={attributes:[w("Audience overview","google-site-kit"),w("Top pages","google-site-kit"),w("Top acquisition sources","google-site-kit"),w("AdSense & Analytics metrics for top pages","google-site-kit")]},e.dialogRef=E(),e}return m()(t,e),o()(t,[{key:"componentDidMount",value:function(){new v.d(this.dialogRef.current)}},{key:"render",value:function(){var e=this.props,t=e.dialogActive,n=e.handleDialog,i=e.title,a=e.provides,l=e.handleConfirm,o=e.subtitle,c=e.confirmButton,s=e.dependentModules;return React.createElement("div",{ref:this.dialogRef,className:"mdc-dialog ".concat(t?"mdc-dialog--open":""),role:"alertdialog","aria-modal":"true","aria-labelledby":"remove-module-dialog","aria-describedby":"remove-module-dialog-description","aria-hidden":t?"false":"true",tabIndex:"-1"},React.createElement("div",{className:"mdc-dialog__scrim"}," "),React.createElement(k.a,{active:t},React.createElement("div",null,React.createElement("div",{className:"mdc-dialog__container"},React.createElement("div",{className:"mdc-dialog__surface"},i&&React.createElement("h2",{id:"remove-module-dialog",className:"mdc-dialog__title"},i),o&&React.createElement("p",{className:"mdc-dialog__lead"},o),React.createElement("section",{id:"remove-module-dialog-description",className:"mdc-dialog__content"},React.createElement("ul",{className:"mdc-list mdc-list--underlined mdc-list--non-interactive"},a&&a.map(function(e){return React.createElement("li",{className:"mdc-list-item",key:e},React.createElement("span",{className:"mdc-list-item__text"},e))}))),s&&React.createElement("p",{className:"mdc-dialog__dependecies"},React.createElement("strong",null,w("Note: ","google-site-kit")),s),React.createElement("footer",{className:"mdc-dialog__actions"},React.createElement(p.a,{onClick:l,danger:!0},c||w("Disconnect","google-site-kit")),React.createElement(f.a,{className:"mdc-dialog__cancel-button",onClick:function(){return n()},inherit:!0},w("Cancel","google-site-kit"))))))))}}]),t}(y);N.propTypes={dialogActive:h.a.bool,handleDialog:h.a.func,handleConfirm:h.a.func.isRequired,title:h.a.string,description:h.a.string,confirmButton:h.a.string},N.defaultProps={dialogActive:!1,handleDialog:null,title:null,description:null,confirmButton:null},t.a=N},70:function(e,t,n){"use strict";n(8);var i=n(18),a=wp.i18n.__;t.a=function(e){var t=e.beta,n=void 0===t||t;return React.createElement("div",{className:"googlesitekit-logo","aria-hidden":"true"},React.createElement(i.a,{id:"logo-g",className:"googlesitekit-logo__logo-g",height:"34",width:"32"}),React.createElement(i.a,{id:n?"logo-sitekit-beta":"logo-sitekit",className:"\n\t\t\t\t googlesitekit-logo__logo-sitekit\n\t\t\t\t ".concat(n?"googlesitekit-logo__logo-sitekit--beta":"","\n\t\t\t\t"),height:n?"28":"26",width:n?"206":"99"}),React.createElement("span",{className:"screen-reader-text"},a("Site Kit by Google Logo","google-site-kit")))}}}]);